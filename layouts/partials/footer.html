<footer class="govuk-footer" role="contentinfo">
    <div class="govuk-width-container">
        <p>
            {{ .Site.Copyright }}
        </p>

        <p lang="en">
            Built using <a class="govuk-footer__link" aria-label="Learn more about Hugo static site generator" href="https://gohugo.io/">hugo</a> with a <a class="govuk-footer__link" aria-label="View the custom theme repository on GitHub" href="https://github.com/boapps/govukhugo">custom theme</a> based on <a class="govuk-footer__link" aria-label="View the original govukhugo repository on GitHub" href="https://github.com/co-analysis/govukhugo">govukhugo</a>.
        </p>

        <p>
            <a class="govuk-footer__link" aria-label="Subscribe to our RSS feed for updates" href="/index.xml">rss</a>
        </p>
    </div>
</footer>

<!-- Apply GOV.UK and govukhugo tagging -->
<script type="text/javascript">

    function applyGOVUK(tag, govuk_class) {
        var elements = document.querySelector("div.dashboard-content").getElementsByTagName(tag)

        var i;
        for (i = 0; i < elements.length; i++) {
            if (elements[i].classList.contains("lntable") || elements[i].classList.contains("lntd")) {
                null;
            } else if (tag == "P" && (elements[i].classList.contains("govuk-body-l") || elements[i].classList.contains("govuk-body-s"))) {
                null;
            } else if (tag == "HR" && (elements[i].classList.contains("govuk-section-break"))) {
                null;
            } else {
                elements[i].classList.add(govuk_class);
            }

        };

    };

    /* Style paragraphs */
    applyGOVUK("P", "govuk-body");

    /* Style tables */
    applyGOVUK("TABLE", "govuk-table");
    applyGOVUK("CAPTION", "govuk-table__caption");
    applyGOVUK("CAPTION", "govuk-table__caption--m");
    applyGOVUK("TR", "govuk-table__row");
    applyGOVUK("TD", "govuk-table__cell");
    applyGOVUK("THEAD", "govuk-table__head");
    applyGOVUK("TH", "govuk-table__header");

    /* Style other typography */
    applyGOVUK("BLOCKQUOTE", "govuk-inset-text");
    applyGOVUK("STRONG", "govuk-!-font-weight-bold");
    applyGOVUK("B", "govuk-!-font-weight-bold");

    /* Style lists */
    applyGOVUK("UL", "govuk-list");
    applyGOVUK("UL", "govuk-list--bullet");
    applyGOVUK("OL", "govuk-list");
    applyGOVUK("OL", "govuk-list--number");

    /* Section breaks*/
    applyGOVUK("HR", "govuk-section-break--l");
    applyGOVUK("HR", "govuk-section-break");

    /* Endnotes */
    var fn_p = document.querySelectorAll("div.footnotes li p")
    if (fn_p.length > 0) {
        document.querySelector("div.footnotes ol").classList.add("govuk-body-s")
        for (var i = 0; i < fn_p.length; i++) {
            fn_p[i].classList.add("govuk-body-s")
        }
    }

    /* Add spacing to code highlight divs */
    function styleCodeBlocks() {
        var code_elements = document.querySelectorAll("div.highlight")
        var i;

        for (i = 0; i < code_elements.length; i++) {
            code_elements[i].classList.add("govuk-body");
        };
    };
    styleCodeBlocks();

    /* Style in-page TOCs */
    function restyleTOC() {

        var toc_elements = document.querySelectorAll("#page_toc #TableOfContents ul")

        var i;

        for (i = 0; i < toc_elements.length; i++) {
            toc_elements[i].classList.remove("govuk-list");
            toc_elements[i].classList.remove("govuk-list--bullet");
            toc_elements[i].classList.add("toc-list");

        };

        var toc_links = document.querySelectorAll("#page_toc #TableOfContents a")

        for (i = 0; i < toc_links.length; i++) {
            toc_links[i].classList.add("toc-link");
        };

    };
    restyleTOC();

    {{ with .Params.rmarkdown }}

    /* style datatables */
    govuk_DT_styling = function () {
        $("table.dataTable").addClass("govuk-table");
        $("table.dataTable caption").addClass("govuk-table__caption govuk-table__caption--m");
        $("table.dataTable thead").addClass("govuk-table__head");
        $("table.dataTable tbody").addClass("govuk-table__body");
        $("table.dataTable tr").addClass("govuk-table__row");
        $("table.dataTable th").addClass("govuk-table__header");
        $("table.dataTable td").addClass("govuk-table__cell");
        $(".datatables label").addClass("govuk-label govuk-!-font-size-16");
        $(".datatables select").addClass("govuk-select govuk-!-font-size-16");
        $(".datatables input").addClass("govuk-input govuk-!-font-size-16");
        $(".datatables .dataTables_info").addClass("govuk-!-font-size-14");
        $(".dataTables_paginate").addClass("govuk-!-font-size-14");
        $(".datatables a.ui-button.ui-state-disabled").addClass("govuk-tag govuk-!-font-size-14");
        $(".datatables a.ui-button.previous.ui-state-disabled").css("display", "none");
        $(".datatables a.ui-button.next.ui-state-disabled").css("display", "none");
        $(".datatables table").css("border-bottom", "unset");
        $("button.dt-button.ui-button").addClass("govuk-!-font-size-14");
        $(".crosstalk-input .control-label").addClass("govuk-label govuk-!-font-size-16");
    };

    reset_filters = function () {
        $(".selectized").each(function (index, element) {
            element.selectize && element.selectize.clear()
        });

        $("input[type='search']").val('')

        $(".datatables table").DataTable().search("")

    };

    $(".datatables").on('init.dt', function () {
        $('.dataTables_filter').insertAfter("#fs_org");
        $('.loading').css("display", "none");
    });

    $(".datatables").on('draw.dt', function () { govuk_DT_styling(); });

    $("#clear-filters").on('click', function () { reset_filters();});

    {{ end }}

    function scrollTop() {
        if (window.innerWidth <= 768) {
            document.getElementById("scroll-back").style.display = "none";
        } else if (document.body.scrollTop > 200 || document.documentElement.scrollTop > 200) {
            document.getElementById("scroll-back").style.display = "block";
        } else {
            document.getElementById("scroll-back").style.display = "none";
        };
    }

    window.onscroll = function() { scrollTop() };

    function mobileNav() {
        var navState = document.getElementById("mobile-nav").style.display
        if (navState == '' || navState == "none") {
            document.getElementById("mobile-nav").style.display = "block";
        } else {
            document.getElementById("mobile-nav").style.display = "none";
        }
        console.log(navState)
    }

    document.getElementById("mobile-nav-control").onclick = function() { mobileNav() };

    $("a.govuk-tabs__tab").on("click", function() {
        window.dispatchEvent(new Event('resize'))
    })

</script>

<!-- GOV.UK scripting -->
<script src="{{ "js/govuk-frontend-4.0.0.min.js" | absURL }}"></script>
<script>
    window.GOVUKFrontend.initAll()
</script>